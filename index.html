<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rock Paper Scissors!</title>
</head>
<body>
    <script>
        function getComputerPlay(){
            let choices = ["rock", "paper","scissors"];
            //get and store random number between 0 and length of choices -1
            let maxIndex = choices.length;
            let chosenIndex = getRandNum(maxIndex);
            //store and return the random choices index value
            let chosenPlay = choices[chosenIndex];
            return chosenPlay;
        }

        function getRandNum(max){
            return Math.floor(Math.random() * max);
        }

        function capitalize(word){
            //make word all lowercase
            let lowerCaseWord = word.toLowerCase();

            //get and capitalize first letter
            let firstLetter = word[0].toUpperCase();

            //store and add the rest of the original word to the capitalized letter string
            let restOfWord = lowerCaseWord.slice(1);
            let capitalizedWord = firstLetter.concat("",restOfWord);
            return capitalizedWord;
        }
        
        function declareOutcome(outcome, playerSelection, computerSelection){
            //get whether player won or lost

            //capitalize player and computer selection
            playerSelection = capitalize(playerSelection);
            computerSelection = capitalize(computerSelection);

            //display message
            //if loss You lost! computerselection beats playerSelection
            //if tie It's a playerselection tie!
            //if win You won! playerselection beats computer selection
            //if fail display invalidity

            switch(outcome){
                case "loss":
                    return `You lost! ${computerSelection} beats ${playerSelection}!`;
                
                case "tie":
                    return `It's a ${playerSelection} tie!`;
                
                case "win":
                    return `You won! ${playerSelection} beats ${computerSelection}!`;
                
                case "fail":
                    return `${playerSelection} was an invalid submission.`;
            }
        }

        function checkRoundWin(playerSelection, computerSelection){
            //make selections lowercase
            playerSelection = playerSelection.toLowerCase();
            computerSelection = computerSelection.toLowerCase();
            //check selections against each other
            //rock
            //  if compsel is paper, loss
            //  if compsel is scissors, win
            //paper
            //  if compsel is scissors, loss
            //  if compsel is rock, win
            //scissors
            //  if compsel is rock, loss
            //  if compsel is paper, win

            switch(playerSelection){
                case "rock":{
                    if(computerSelection === "rock"){
                        return "tie";
                    } else if(computerSelection == "paper"){
                        return "loss";
                    } else if(computerSelection =="scissors"){
                        return "win";
                    }
                }

                case "paper":{
                    if(computerSelection === "paper"){
                        return "tie";
                    } else if(computerSelection === "scissors"){
                        return "loss";
                    } else if(computerSelection === "rock"){
                        return "win";
                    }
                }

                case "scissors":{
                    if(computerSelection === "scissors"){
                        return "tie";
                    } else if(computerSelection === "rock"){
                        return "loss";
                    } else if (computerSelection === "paper"){
                        return "win";
                    }
                }

                default:
                    return "fail";
            }
        }

        function game(){

            let playerScore = 0;
            let computerScore = 0;

            //5 times
            let roundNumber = 1;

            while(roundNumber < 6){
                //get computer's decision
                let computerChoice = getComputerPlay();

                //prompt and store player's decision
                let playerChoice = prompt("Rock, Paper or Scissors?")

                //get the outcome
                let resultForTheRound = checkRoundWin(playerChoice, computerChoice);

                //display the result
                console.log(declareOutcome(resultForTheRound, playerChoice, computerChoice));

                //if win, increment player counter
                //if loss, increment computer counter
                //if tie, do nothing

                switch(resultForTheRound){
                    case "win":
                        playerScore++;
                        break;

                    case "loss":
                        computerScore++;
                        break;

                    case "tie":
                        break;

                }

                //if fail do nothing but display a message
                //otherwise increment the roundNumber

                if(resultForTheRound === "fail"){
                    let message = `Redoing round ${roundNumber}..`;
                    console.log(message);
                } else{
                    roundNumber++;
                }
            }

            //announce ultimate winner
            let theWinner = getGameWinner(playerScore, computerScore);
            let resultMessage = announceGameWinner(theWinner);
            console.log(`Computer: ${computerScore} | Player: ${playerScore}`)
            console.log(resultMessage);
        }

        function getGameWinner(playerScore, computerScore){
            //if playerscore is greater, return player
            //if computerscore is greater, return computer
            //if they are equal, return tie

            if(playerScore > computerScore){
                return "player";
            } else if(playerScore < computerScore){
                return "computer";
            } else if (playerScore === computerScore){
                return "tie";
            }
            
        }

        function announceGameWinner(result){
            switch(result){
                case "player":
                    return "You won against the computer! Yay!";
                
                case "computer": 
                    return "The computer won this time. Try again!";

                case "tie": 
                    return "You tied with the computer but didn't win this time. Try again!";
            }

        }

        game();
    </script>
</body>
</html>