<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="resources/css/styles.css">
    <title>Rock Paper Scissors!</title>
</head>
<body>
    
    <header><h1>Rock Paper Scissors!</h1></header>
    <main>
        <button id="choose-rock"><img src="resources/images/rock.png" alt=""><p>Rock</p></button>
        <button id="choose-paper"><img src="resources/images/paper.png" alt=""><p>Paper</p></button>
        <button id="choose-scissors"><img src="resources/images/scissors.png" alt=""><p>Scissors</p></button>
        
        
        <div id="display-area"><p></p></div>
    </main>

   <script>

        //initialize counter to 1
        //initialize playerscore to 0
        //initialize computerscore to 0
        //add event listener to buttons, onclick playround

        //in playround
        //get the choice id of the button the event was called on
        //get the choice of the computer
        //call compare choices, send player choice and computer choice, and store who won
        //if player won, increment playerscore
        //if computer won, increment computerscore
        //post results to display-area div
        //increment the counter

        //if counter > 6 call declarewinner
        //in declare winner compare playerscore and computer score
        //initialize winningmessage to undefined
        //if playerscore is greater, set winningmessage to a congrats
        //if computerscore is greater, set winningmessage to computer won, try again
        //if equal, set winning message to, you tied with the computer, try again?

        function getComputerPlay(){
            let choices = ["rock", "paper","scissors"];
            //get and store random number between 0 and length of choices -1
            let maxIndex = choices.length;
            let chosenIndex = getRandNum(maxIndex);
            //store and return the random choices index value
            let chosenPlay = choices[chosenIndex];
            return chosenPlay;
        }

        function getRandNum(max){
            return Math.floor(Math.random() * max);
        }

        function capitalize(word){
            let lowerCaseWord = word.toLowerCase();

            let firstLetter = word[0].toUpperCase();

            let restOfWord = lowerCaseWord.slice(1);
            let capitalizedWord = firstLetter.concat("",restOfWord);
            return capitalizedWord;
        }
        
        function declareOutcome(outcome, playerSelection, computerSelection){
            playerSelection = capitalize(playerSelection);
            computerSelection = capitalize(computerSelection);

            switch(outcome){
                case "loss":
                    return `You lost! ${computerSelection} beats ${playerSelection}!`;
                
                case "tie":
                    return `It's a ${playerSelection} tie!`;
                
                case "win":
                    return `You won! ${playerSelection} beats ${computerSelection}!`;
                
                case "fail":
                    return `${playerSelection} was an invalid submission.`;
            }
        }

        function checkRoundWin(playerSelection, computerSelection){

            playerSelection = playerSelection.toLowerCase();
            computerSelection = computerSelection.toLowerCase();

            switch(playerSelection){
                case "rock":{
                    if(computerSelection === "rock"){
                        return "tie";
                    } else if(computerSelection == "paper"){
                        return "loss";
                    } else if(computerSelection =="scissors"){
                        return "win";
                    }
                }

                case "paper":{
                    if(computerSelection === "paper"){
                        return "tie";
                    } else if(computerSelection === "scissors"){
                        return "loss";
                    } else if(computerSelection === "rock"){
                        return "win";
                    }
                }

                case "scissors":{
                    if(computerSelection === "scissors"){
                        return "tie";
                    } else if(computerSelection === "rock"){
                        return "loss";
                    } else if (computerSelection === "paper"){
                        return "win";
                    }
                }

                default:
                    return "fail";
            }
        }

        function game(){
            let playerScore = 0;
            let computerScore = 0;
            let roundNumber = 1;

            while(roundNumber < 6){
                let computerChoice = getComputerPlay();
                let playerChoice = prompt("Rock, Paper or Scissors?")

                let resultForTheRound = checkRoundWin(playerChoice, computerChoice);

                console.log(declareOutcome(resultForTheRound, playerChoice, computerChoice));

                switch(resultForTheRound){
                    case "win":
                        playerScore++;
                        break;

                    case "loss":
                        computerScore++;
                        break;

                    case "tie":
                        break;

                }

                if(resultForTheRound === "fail"){
                    let message = `Redoing round ${roundNumber}..`;
                    console.log(message);
                } else{
                    roundNumber++;
                }
            }

            let theWinner = getGameWinner(playerScore, computerScore);
            let resultMessage = announceGameWinner(theWinner);
            console.log(`Computer: ${computerScore} | Player: ${playerScore}`)
            console.log(resultMessage);
        }

        function getGameWinner(playerScore, computerScore){

            if(playerScore > computerScore){
                return "player";
            } else if(playerScore < computerScore){
                return "computer";
            } else if (playerScore === computerScore){
                return "tie";
            }
            
        }

        function announceGameWinner(result){
            switch(result){
                case "player":
                    return "You won against the computer! Yay!";
                
                case "computer": 
                    return "The computer won this time. Try again!";

                case "tie": 
                    return "You tied with the computer but didn't win this time. Try again!";
            }

        }

    </script>
</body>
</html>